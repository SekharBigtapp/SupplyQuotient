<!-- partial -->
<div class="content-wrapper ">
  <div class="container">
    <div class="pb-0">

      <!-- first row starts here -->

      <div class="row">
        <div class="header-right mt-md-2 mt-lg-0 w-100">
          <div class=" align-items-center d-inline-block">
            <a href="#">
              <p class="m-0 pe-3">System Configuration</p>
            </a>
            <a class="ps-3 me-4" href="#">
              <p class="m-0"> Forecasting Configuration</p>
            </a>
          </div>
          <!-- <div class="" style="display: inline-block;  float: right;">
            <button type="button" (click)="backButtonClick()" class=" btn btn-sm btn-success btn-icon-text"
              style="height:30px">
              <i class="mdi mdi-arrow-left"></i> Back</button>
          </div> -->
        </div>
      </div>




      <div class="row p-0 grid-margin stretch-card mt-3">
        <form [formGroup]="forecastForm" (ngSubmit)="onforecastMasterClick()">
          <div class="card">
            <div class="card-body pb-5">

              <div class="mb-3">
                <h3 class="d-inline-block"> Backtesting - Forecasting </h3>

              </div>
              <div class="clearfix"></div>

              <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab"> Backtesting </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab"> Forecasting Configuration </a>
                </li>

              </ul>

              <div class="tab-content">
                <div class="tab-pane active" id="tabs-1" role="tabpanel">
                  <div class="clearfix"></div>

                  <div class="product-filters">

                    <div class="card">
                      <div class="card-body">

                        <div class="row">
                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>Back Testing</mat-label>
                              <mat-select  id="exampleFormControlSelect1" formControlName="Date" placeholder="Time_Key">
                                <mat-option value="10">10 Days</mat-option>
                                <mat-option value="20">20 Days </mat-option>
                                <mat-option value="30">30 Days </mat-option>
                                <mat-option value="60">60 Days </mat-option>
                                <mat-option value="90">90 Days </mat-option>
                              </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>Store Name</mat-label>
                              <mat-select  id="exampleFormControlSelect1" formControlName="Store_Name">
                                <mat-option *ngFor="let store of storeNameList" [value]="store.store_name">
                                  {{store.store_name}}
                                </mat-option>
                              </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>Product Categories</mat-label>
                              <mat-select  formControlName="Category_Name" (change)="getSubCategorysList()">
                                <mat-option *ngFor="let category of categorysList" [value]="category.prod_cat">
                                  {{category.prod_cat}}</mat-option>
                              </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>Sub Categories</mat-label>
                              <mat-select formControlName="Subcategory_Name">
                                <mat-option *ngFor="let subProduct of subCategorysValues" [value]="subProduct.prod_subcat">
                                  {{subProduct.prod_subcat}}</mat-option>
                              </mat-select>
                              </mat-form-field>
                            </div>
                          </div>


                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>Product Name</mat-label>
                              <mat-select formControlName="Product_Name">
                                <mat-option *ngFor="let products of productNameList" [value]="products.prod_name">
                                  {{products.prod_name}}</mat-option>
                              </mat-select>
                              </mat-form-field>
                            </div>
                          </div>


                          <div class="col-md-3">
                            <div class="form-group">
                              <mat-form-field>
                              <mat-label>SKU Code</mat-label>
                              <input type="text" matInput placeholder="SKU Code" aria-label="skucode" formControlName="SKU_ID">
                              </mat-form-field>
                            </div>
                          </div>


                          <div class="col-md-3">
                            <label> &nbsp; </label><br>
                            <button type="submit" class=" btn btn-sm btn-success mt-2 mt-sm-0 btn-icon-text">
                              <i class="mdi mdi-checkbox-marked-circle-outline"></i> Backtest </button>
                            <button type="submit" class=" btn btn-sm btn-success mt-2 mt-sm-0 btn-icon-text"
                              style="margin-left: 15px ;" (click)="onclear()">
                              <i class="mdi mdi-checkbox-marked-circle-outline"></i> Clear </button>
                          </div>
                          <div class="clearfix"></div> <br>


                        </div>

                      </div>
                    </div>

                  </div>

                  <div class="clearfix"></div>
                  <div class="table-responsive ">
                    <table mat-table [dataSource]="forecastMasterData" *ngIf="!!forecastMasterData" matSort
                      class="mat-elevation-z8 mat-datagrid w-100 table-bordered">

                      <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            Date
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.date | date: 'dd/MM/yyyy'}} </td>
                      </ng-container>

                      <ng-container matColumnDef="store_name">
                        <th mat-header-cell *matHeaderCellDef style="width: 250px;" scope="col">
                          <label mat-sort-header>
                            Store Name
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.store_name}} </td>
                      </ng-container>


                      <ng-container matColumnDef="prod_name">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            Product Name
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.prod_name}} </td>
                      </ng-container>

                      <ng-container matColumnDef="sales_qty">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            Sales Volume
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element">{{element.sales_qty}}</td>
                      </ng-container>

                      <ng-container matColumnDef="demand_forecast">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            Demand Forecast
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element">{{element.demand_forecast}}</td>
                      </ng-container>

                      <ng-container matColumnDef="p10_demand_forecast">
                        <th mat-header-cell *matHeaderCellDef style="width:90px ;" scope="col">
                          <label mat-sort-header>
                            P-10
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.p10_demand_forecast}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="p50_demand_forecast">
                        <th mat-header-cell *matHeaderCellDef style="width:90px ;" scope="col">
                          <label mat-sort-header>
                            P-50
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.p50_demand_forecast}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="p90_demand_forecast">
                        <th mat-header-cell *matHeaderCellDef style="width:90px ;" scope="col">
                          <label mat-sort-header>
                            P-90
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.p90_demand_forecast}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="P10Variance">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            P-10 Difference
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.P10Variance}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="P50Variance">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            P-50 Difference
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.P50Variance}}
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="P90Variance">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            P-90 Difference
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.P90Variance}}
                        </td>
                      </ng-container>

                      <!--  <ng-container matColumnDef="NewForcastVolume">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            New Forecasted Volume
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element">
                          <section *ngIf="isPTenValue">{{element.P10}}</section>
                          <section *ngIf="isPFiftyValue">{{element.P50}}</section>
                          <section *ngIf="isPNintyValue">{{element.P90}}</section>
                        </td>
                      </ng-container>
    
                      <ng-container matColumnDef="Category_Name">
                        <th mat-header-cell *matHeaderCellDef scope="col">
                          <label mat-sort-header>
                            Category Name
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.Category_Name}} </td>
                      </ng-container> -->

                      <!-- <ng-container matColumnDef="Actions">
                        <th mat-header-cell *matHeaderCellDef style="width: 50px;" scope="col">
                          <label>
                            Actions
                          </label>
                        </th>
                        <td mat-cell *matCellDef="let element">
                          <span style="cursor: pointer;">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i> &nbsp;
                            <i class="fa fa-trash" aria-hidden="true"></i>
                          </span>
                        </td>
                      </ng-container> -->

                      <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>
                    </table>
                    <mat-paginator [pageSize]="pageSize" [hidden]="!forecastMasterData" [pageSizeOptions]="[10, 25, 50]"
                      aria-label="Select page">
                    </mat-paginator>
                  </div>

                </div>

                <div class="tab-pane" id="tabs-2" role="tabpanel">

                  <div class="col-md-12">
                    <div class=" pl-5"> <br> <br>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                          value="P10" (change)="onPValuesClick('P10')" checked>
                        <label class="form-check-label ml-1" for="inlineRadio1"> P10 </label>
                      </div> &nbsp; &nbsp;
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                          value="P50" (change)="onPValuesClick('P50')">
                        <label class="form-check-label ml-1" for="inlineRadio2"> P50 </label>
                      </div> &nbsp; &nbsp;
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3"
                          value="P90" (change)="onPValuesClick('P90')">
                        <label class="form-check-label ml-1" for="inlineRadio3">P90</label>
                      </div>
                      <div class="ml-2 pl-4 d-inline-block" style="    margin-left: 30px;   vertical-align: super;">
                        <button type="submit" class=" btn btn-sm btn-success  btn-icon-text">
                          <i class="mdi mdi-checkbox-marked-circle-outline"></i> Save </button>
                      </div>

                    </div>
                  </div>

                </div>
              </div>





            </div>


          </div>
        </form>

      </div>
    </div>



  </div>
  <!-- main-panel ends -->
</div>
<!-- page-body-wrapper ends -->